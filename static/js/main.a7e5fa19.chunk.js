(this["webpackJsonpblog-posts"]=this["webpackJsonpblog-posts"]||[]).push([[0],{72:function(t,e,s){},73:function(t,e,s){"use strict";s.r(e);var a=s(1),r=s(20),n=s.n(r),c=s(18),i=s(3),o=(s(45),s(10)),l=s(11),p=s(13),d=s(12),u=s(15),h=s(4),j=s.n(h),m=s(14),f=s(38),b=s.n(f).a.create({baseURL:"https://jsonplaceholder.typicode.com"}),O=s(26),x=s.n(O),v=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(){var s=Object(m.a)(j.a.mark((function s(a){var r;return j.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,b.get("/posts?userId=".concat(t));case 3:r=s.sent,a(e?{type:"FETCH_NUMBER_OF_POST_OF_USERS",payload:{id:t,num:r.data.length}}:{type:"FETCH_POST_OF_USER",payload:r.data}),s.next=10;break;case 7:s.prev=7,s.t0=s.catch(0),console.log(s.t0);case 10:case"end":return s.stop()}}),s,null,[[0,7]])})));return function(t){return s.apply(this,arguments)}}()},g=function(t){return function(){var e=Object(m.a)(j.a.mark((function e(s){var a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.get("/users/".concat(t));case 2:a=e.sent,s({type:"FETCH_USER_DETAILS",payload:a.data});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},y=s(0),P=function(t){Object(p.a)(s,t);var e=Object(d.a)(s);function s(){return Object(o.a)(this,s),e.apply(this,arguments)}return Object(l.a)(s,[{key:"render",value:function(){var t=this;return Object(y.jsxs)("div",{className:"input-group mb-2 ms-auto filter-form",children:[Object(y.jsxs)("label",{className:"input-group-text text-muted",children:[" ",Object(y.jsx)("i",{className:"fas fa-filter me-1 "})," Filter by"]}),this.props.updateSearchParams&&Object(y.jsxs)("select",{className:"form-select",style:{maxWidth:"30%"},onChange:function(e){t.props.updateSearchParams(e.target.value)},children:[Object(y.jsx)("option",{value:"Username",children:"User Name"}),Object(y.jsx)("option",{value:"Company",children:"Company"})]}),Object(y.jsx)("input",{type:"text",className:"form-control",placeholder:"Type ".concat(this.props.searchBy),onChange:function(e){t.props.filter(e.target.value)}})]})}}]),s}(a.Component),N=function(t){Object(p.a)(s,t);var e=Object(d.a)(s);function s(){var t;return Object(o.a)(this,s),(t=e.call(this)).onFilterApply=function(e){t.setState({filterKeyword:e})},t.updateFilterParams=function(e){t.setState({filterParam:e})},t.state={filterParam:"Username",filterKeyword:""},t}return Object(l.a)(s,[{key:"componentDidMount",value:function(){this.props.fetchUsersWithBlogCount()}},{key:"render",value:function(){var t=this,e=this.props.users.map((function(e,s){var a=t.props.posts.find((function(t){return t.id===e.id?t.num:0}));if(""===t.state.filterKeyword);else if("Username"===t.state.filterParam){if(!e.name.includes(t.state.filterKeyword))return}else if(!e.company.name.includes(t.state.filterKeyword))return;return Object(y.jsxs)("tr",{children:[Object(y.jsx)("td",{children:e.name}),Object(y.jsx)("td",{children:e.company.name}),Object(y.jsx)("td",{children:Object(y.jsxs)(c.b,{className:"link-parimary",to:"/posts/".concat(e.id),children:[" ",a?a.num:0," blogs"]})})]},e.id)}));return Object(y.jsxs)("div",{children:[Object(y.jsx)(P,{filter:this.onFilterApply,searchBy:this.state.filterParam,updateSearchParams:this.updateFilterParams}),Object(y.jsxs)("table",{className:"table",children:[Object(y.jsx)("thead",{className:"table-dark",children:Object(y.jsxs)("tr",{children:[Object(y.jsx)("th",{scope:"col",children:"User Name"}),Object(y.jsx)("th",{scope:"col",children:"Company"}),Object(y.jsx)("th",{scope:"col",children:"Blogs"})]})}),Object(y.jsx)("tbody",{children:e.filter(Boolean).length>0?e:Object(y.jsx)("tr",{children:Object(y.jsx)("td",{colSpan:"3",children:"No records found."})},e.length)})]})]})}}]),s}(a.Component),S=Object(u.b)((function(t){return{users:t.users,posts:t.posts}}),{fetchUsersWithBlogCount:function(){return function(){var t=Object(m.a)(j.a.mark((function t(e,s){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e(function(){var t=Object(m.a)(j.a.mark((function t(e){var s;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,b.get("/users");case 2:s=t.sent,e({type:"FETCH_USERS",payload:s.data});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 2:x.a.uniq(x.a.map(s().users,"id")).forEach((function(t){e(v(t,!0))}));case 4:case"end":return t.stop()}}),t)})));return function(e,s){return t.apply(this,arguments)}}()}})(N),C=function(t){Object(p.a)(s,t);var e=Object(d.a)(s);function s(){var t;Object(o.a)(this,s);for(var a=arguments.length,r=new Array(a),n=0;n<a;n++)r[n]=arguments[n];return(t=e.call.apply(e,[this].concat(r))).getPages=function(){var e=t.props.totalPages,s=t.props.limit,a=Math.ceil(e/s);return Array.from(Array(a).keys())},t.pageClicked=function(e){t.props.updatePost(e)},t}return Object(l.a)(s,[{key:"render",value:function(){var t=this,e=this.getPages().map((function(e){return Object(y.jsx)("li",{className:"page-item",children:Object(y.jsx)("div",{className:"page-link page-nos "+(t.props.currentPage===e+1?"active-page":""),onClick:function(){t.pageClicked(e+1)},children:e+1})},e)}));return Object(y.jsx)("div",{children:Object(y.jsxs)("nav",{className:"","saria-label":"Page navigation example",children:[Object(y.jsx)("div",{children:this.props.numOfPosts}),Object(y.jsx)("ul",{className:"pagination pagesDiv ",children:e})]})})}}]),s}(a.Component),D=function(t){Object(p.a)(s,t);var e=Object(d.a)(s);function s(t){var a;return Object(o.a)(this,s),(a=e.call(this,t)).updatePosts=function(t){a.setState({pageOffset:t}),a.props.getPostsForAUserWithPagination(a.props.match.params.id,t,a.state.limit)},a.filterPosts=function(t){a.setState({filterParams:t}),a.props.getPostsForAUser(a.state.userID)},a.state={userID:null,limit:3,pageOffset:1,totalPostsByUser:10,filterParams:""},a}return Object(l.a)(s,[{key:"componentDidMount",value:function(){this.setState({userID:this.props.match.params.id}),this.props.fetchUserDetails(this.props.match.params.id),this.props.getPostsForAUserWithPagination(this.props.match.params.id,this.state.pageOffset,this.state.limit)}},{key:"render",value:function(){var t=this,e=""===this.state.filterParams?this.props.paginatedPosts.map((function(e){return Object(y.jsx)("li",{className:"posts-card",onClick:function(){t.props.history.push("/post/".concat(t.state.userID,"/").concat(e.id))},children:Object(y.jsx)("div",{children:Object(y.jsx)("h4",{children:e.title})})},e.id+"-"+e.title)})):this.props.posts.map((function(e){if(e.title)return e.title.includes(t.state.filterParams)?Object(y.jsx)("li",{className:"posts-card",onClick:function(){t.props.history.push("/post/".concat(t.state.userID,"/").concat(e.id))},children:Object(y.jsx)("div",{children:Object(y.jsx)("h4",{children:e.title})})},e.id+"-"+e.title):null}));return Object(y.jsxs)("div",{children:[Object(y.jsx)("div",{className:"card card-body userCard",children:Object(y.jsxs)("div",{className:"d-flex",children:[Object(y.jsx)("div",{className:"me-3 text-center pt-3",children:Object(y.jsx)("div",{children:Object(y.jsx)("i",{className:"fa fa-user userPhoto","aria-hidden":"true"})})}),Object(y.jsxs)("div",{className:"",children:[Object(y.jsxs)("div",{children:[Object(y.jsx)("h4",{children:this.props.userDetail.name?this.props.userDetail.name:null}),"  "]}),Object(y.jsx)("div",{children:Object(y.jsxs)("p",{className:"m-0",children:["E-mail: ",this.props.userDetail.email?this.props.userDetail.email:null]})}),Object(y.jsx)("div",{children:Object(y.jsxs)("p",{className:"m-0",children:["Company: ",this.props.userDetail.company?this.props.userDetail.company.name:null]})})]})]})}),Object(y.jsxs)("div",{className:"card card-body postsOfuserCard",children:[Object(y.jsxs)("div",{className:"user-post-nav",children:[Object(y.jsx)("div",{className:"pt-2",children:Object(y.jsxs)("h6",{style:{marginLeft:"6px"},children:["Blogs posted by ",this.props.userDetail.name?this.props.userDetail.name:null]})}),Object(y.jsx)(P,{searchBy:"Blog title",filter:this.filterPosts})]}),Object(y.jsx)("div",{children:Object(y.jsx)("div",{className:"posts",children:Object(y.jsx)("ul",{style:{padding:"0px"},children:e.length>0?e.filter(Boolean).length>0?e:Object(y.jsx)("div",{children:"No records found."}):Object(y.jsx)("div",{className:"loader",children:Object(y.jsxs)("h4",{children:[Object(y.jsx)("span",{className:"donutSpinner me-2 "}),"Loading..."]})})})})}),Object(y.jsx)("div",{children:""===this.state.filterParams&&Object(y.jsx)(C,{totalPages:this.state.totalPostsByUser,currentPage:this.state.pageOffset,limit:this.state.limit,updatePost:this.updatePosts})})]})]})}}]),s}(a.Component),_=Object(u.b)((function(t){return console.log(t.posts),{userDetail:t.userDetail,paginatedPosts:t.paginatedPosts,posts:t.posts}}),{fetchUserDetails:g,getPostsForAUserWithPagination:function(t,e,s){return function(){var a=Object(m.a)(j.a.mark((function a(r){var n;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,b.get("/posts?userId=".concat(t,"&_page=").concat(e,"&_limit=").concat(s));case 3:n=a.sent,r({type:"FETCH_POST_OF_USER_WITH_PAGINATION",payload:n.data}),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),console.log(a.t0);case 10:case"end":return a.stop()}}),a,null,[[0,7]])})));return function(t){return a.apply(this,arguments)}}()},getPostsForAUser:v})(D),w=function(){var t=Object(m.a)(j.a.mark((function t(e){var s;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,b.delete("/posts/".concat(e));case 2:return s=t.sent,t.abrupt("return",s);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),E=function(t){Object(p.a)(s,t);var e=Object(d.a)(s);function s(t){var a;return Object(o.a)(this,s),(a=e.call(this,t)).handleFilter=function(t){a.setState({filterParams:t})},a.deletePost=function(){var t=a.state.data.id;w(t).then((function(){a.props.history.push("/posts/".concat(a.props.userDetail.id))})).catch((function(t){console.log(t)}))},a.state={filterParams:"",data:[],isShowingComment:!1},a}return Object(l.a)(s,[{key:"componentDidMount",value:function(){this.props.getPostDetails(this.props.match.params.id),this.props.fetchUserDetails(this.props.match.params.userID),this.props.getPostComments(this.props.match.params.id)}},{key:"componentDidUpdate",value:function(t,e){t.postDetail!==this.props.postDetail&&this.setState({data:this.props.postDetail})}},{key:"render",value:function(){var t=this,e=this.props.comments.map((function(t){return Object(y.jsx)("li",{className:"comment",children:Object(y.jsxs)("div",{className:"card card-body",children:[Object(y.jsx)("div",{children:Object(y.jsxs)("small",{className:"text-muted",children:[Object(y.jsx)("i",{className:"fa fa-user me-1","aria-hidden":"true"})," ",t.email]})}),t.body]})})})),s=""===this.state.filterParams?this.state.data.title:this.state.data.title.replace(new RegExp(this.state.filterParams,"g"),"~".concat(this.state.filterParams,"~")).split("~").map((function(e){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.includes(t.state.filterParams)?Object(y.jsx)("span",{className:"bg-primary text-white",children:e},s++):e})),a=""===this.state.filterParams?this.state.data.body:this.state.data.body.replace(new RegExp(this.state.filterParams,"g"),"~".concat(this.state.filterParams,"~")).split("~").map((function(e){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.includes(t.state.filterParams)?Object(y.jsx)("span",{className:"bg-primary text-white",children:e},s++):e}));return Object(y.jsxs)("div",{children:[Object(y.jsx)(P,{searchBy:"Text",filter:this.handleFilter}),Object(y.jsxs)("div",{className:"card card-body",children:[Object(y.jsxs)("div",{children:[Object(y.jsx)("h3",{style:{margin:"0px"},children:s}),Object(y.jsxs)("small",{className:"text-muted mt-2",children:["Posted by: ",this.props.userDetail.name?this.props.userDetail.name:null]})]}),Object(y.jsx)("div",{className:"mt-3",children:a}),Object(y.jsxs)("div",{className:"mt-3",children:[Object(y.jsxs)("div",{className:"d-flex",children:[Object(y.jsxs)("div",{className:"text-primary",id:"show-comments",onClick:function(){!1===t.state.isShowingComment?t.setState({isShowingComment:!0}):t.setState({isShowingComment:!1})},children:[Object(y.jsx)("i",{className:"fas fa-comment me-1"}),Object(y.jsxs)("span",{children:[!0===this.state.isShowingComment?"Hide":"Show"," comments"]})]}),Object(y.jsxs)("div",{className:"text-danger ",id:"delete-post",onClick:this.deletePost,children:[Object(y.jsx)("i",{class:"fas fa-trash-alt me-1"})," Delete post"]})]}),Object(y.jsx)("div",{className:!0===this.state.isShowingComment?"collapse show":"collapse",children:Object(y.jsx)("div",{children:Object(y.jsxs)("ul",{style:{margin:"0px",padding:"0px"},children:[" ",e," "]})})})]})]})]})}}]),s}(a.Component),F=Object(u.b)((function(t){return{userDetail:t.userDetail,postDetail:t.postDetails,comments:t.comments}}),{getPostDetails:function(t){return function(){var e=Object(m.a)(j.a.mark((function e(s){var a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.get("/posts/".concat(t));case 2:a=e.sent,s({type:"FETCH_POST_DETAILS",payload:a.data});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},fetchUserDetails:g,getPostComments:function(t){return function(){var e=Object(m.a)(j.a.mark((function e(s){var a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.get("/comments?postId=".concat(t));case 2:a=e.sent,s({type:"FETCH_COMMENTS_FOR_POSTS",payload:a.data});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}})(E);s(72);function T(){return Object(y.jsx)("div",{className:"container main",children:Object(y.jsxs)("div",{className:"card card-body",children:[Object(y.jsxs)(c.b,{to:"/home",style:{textDecoration:"none"},children:[" ",Object(y.jsxs)("h4",{children:[" ",Object(y.jsx)("i",{className:"fab fa-blogger me-1"}),"BloggoMojo"]})]}),Object(y.jsxs)(i.d,{children:[Object(y.jsx)(i.b,{exact:!0,path:"/",children:Object(y.jsx)(i.a,{to:"/home"})}),Object(y.jsx)(i.b,{path:"/home",component:S,exact:!0}),Object(y.jsx)(i.b,{path:"/posts/:id",component:_,exact:!0}),Object(y.jsx)(i.b,{path:"/post/:userID/:id",component:F,exact:!0})]})]})})}var k=s(16),U=s(40),I=Object(k.c)({users:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"FETCH_USERS":return e.payload;default:return t}},posts:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"FETCH_NUMBER_OF_POST_OF_USERS":return[].concat(Object(U.a)(t),[e.payload]);case"FETCH_POST_OF_USER":return e.payload;default:return t}},paginatedPosts:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"FETCH_POST_OF_USER_WITH_PAGINATION":return e.payload;default:return t}},userDetail:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"FETCH_USER_DETAILS":return e.payload;default:return t}},postDetails:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"FETCH_POST_DETAILS":return e.payload;default:return t}},comments:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"FETCH_COMMENTS_FOR_POSTS":return e.payload;default:return t}}}),A=s(39),B=Object(k.d)(I,Object(k.a)(A.a));n.a.render(Object(y.jsx)(u.a,{store:B,children:Object(y.jsx)(c.a,{children:Object(y.jsx)(T,{})})}),document.getElementById("root"))}},[[73,1,2]]]);
//# sourceMappingURL=main.a7e5fa19.chunk.js.map